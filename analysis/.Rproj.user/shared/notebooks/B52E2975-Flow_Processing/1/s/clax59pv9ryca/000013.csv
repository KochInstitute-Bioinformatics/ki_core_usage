"0","ilabs.flow %>%"
"0","  filter(Category %in% c(""Cell Sorting Equipment"", ""Analysis Machines"", ""Imaging Cytometry"")) %>%"
"0","  mutate("
"0","    Category_Label = factor(Category, "
"0","                            levels = c(""Cell Sorting Equipment"", ""Analysis Machines"", ""Imaging Cytometry""),"
"0","                            labels = c(""Sorting"", ""Analysis"", ""Imaging Cytometry"")),"
"0","    Sponsor_ForPlot = factor(Sponsor_ForPlot, levels = sponsor_order)"
"0","  ) %>%"
"0","  group_by(Category_Label, Sponsor_ForPlot) %>%"
"0","  summarise(Quantity = sum(Quantity), .groups = ""drop"") %>%"
"0","  group_by(Category_Label) %>%"
"0","  mutate(Total = sum(Quantity),"
"0","         Percent = round((Quantity / Total) * 100, 0)) %>%"
"0","  ungroup() %>%"
"0","  ggplot(aes(x = Category_Label, y = Quantity, fill = Sponsor_ForPlot)) +"
"0","  geom_col(position = ""dodge"") +"
"0","  geom_text(aes(label = paste0(Percent, ""%"")), "
"0","            position = position_dodge(width = 0.9),"
"0","            vjust = -0.5,"
"0","            size = 3) +"
"0","  scale_fill_manual(values = sponsor_colors) +"
"0","  labs(title = ""Equipment by Category and Sponsor"","
"0","       x = ""Category"","
"0","       y = ""Quantity (Hours)"","
"0","       fill = ""Sponsor"") +"
"0","  theme_minimal() +"
"0","  theme(axis.text.x = element_text(angle = 0))"
